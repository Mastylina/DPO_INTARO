# Вступительное задание на ДПО от Интаро (2 ЭТАП)

## Задание
Разработать сервис, хранящий в себе информацию о бонусном счете пользователя и позволяющем оплачивать этими бонусами заказы в retailCRM. Сопоставлять пользователей в retailCRM и в сервисе с бонусным счетом нужно по номеру телефона.

## Разработка
При выполнении данного вступительного задания был написан сервер на языке Python 3.8.1 с использованием Flask. Данный сервер доступен онлайн по [этому](http://93.170.123.190:5000) адресу. Для проверки работоспособности сервера можно отправить POST запрос по адресу http://93.170.123.190:5000/echo с ключем msg в теле запроса. 

Пример такого запроса:
```
{
    "msg":"test"
}
```

Ответ на такой запрос в случае доступности:
```
{
    "msg": "test hello by Server!"
}
```

## Запуск данного приложения
Для запуска данного приложения необходимо развернуть виртуальное окружение в питоне. Делается это следующей командой:
```
python -m venv env
```
После создания виртуального окружения в папке с проектом появится каталог env. Следующим шагом необходимо активировать данное виртуальное окружение.
Активация виртуального откружения:
```
Linux: source env/bin/activate

Windows: cd env/Scripts/activate
         activate или activate.bat
```
После активации виртуального окружения необходимо установить все зависимости содержащиеся в файле requirements.txt. Делается это следующим образом:
```
pip install -r requirements.txt
```
Последним шагом перед запуском приложения является создание файла `config.py` и заполнение его по следующему шаблону, вместо `''` необходимо поместить свои данные:
```
class Config():
    """
    Основные константы работы модуля
    crm_url - аккаунт в системе RetailCRM
    api_key - ключ для получения методов API RetailCRM
    db_url - путь до базы данных
    host_url - IP сервера виртуальной машины
    """
    crm_url = ''
    api_key = ''
    db_url = ''
    host_url = ''
```
После настройки и создания файла `config.py` необходимо запустить приложение, делается это следующим образом: `python main.py`. В случае успешного запуска будет приведено следующее сообщение:
```
 * Serving Flask app "main" (lazy loading)
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: on
 * Running on http://93.170.123.190:5000/ (Press CTRL+C to quit)
```